## 스프링 핵심 3대 요소

## 1. IOC(Inversion Of Control) 제어 역전 / DI(Depedency Injection) 의존성 주입

IOC를 이해하기 위해서 DI에 대해 알아야 한다. DI는 필드 주입, setter 주입, 생성자 주입 3가지가 있다.   
의존관계가 실행 중에 동적으로 변하는 경우는 거의 없으므로 생성자 주입 방법을 권장한다.   

```java
public class MemberController {

    private final MemberService memberService = new MemberService();
}

```

위의 코드는 의존성을 스스로 등록했다.

```java
public class MemberController {

    private final MemberService memberService;

    public MemberController(MemberService memberService) {
        this.memberService = memberService;
    }
}
```

위의 코드는 외부에서 생성자를 통해 주입하고 있다. 외부에서 주입하는 행위 자체는 DI이고 이를 통해 외부에서 제어권을 가지게 되므로 이를 IOC라고 한다.

### Spring에서 Bean을 등록 하는 방법

1. 어노테이션을 활용해 component scan을 하는 방법이 있다.
SpringBootApplication에서 component scan을 하여 @Component가 있으면 자동으로 bean에 등록해준다. @Controller, @Service, @Repository, @Configuration 등에 @Component가 존재한다.

2. xml 또는 java 코드를 활용하여 직접 등록하는 방법이 있다.
xml 방식은 springboot 방식이 나온 후 잘 사용하지 않고 java 코드를 활용하여 bean에 등록한다.

```java
@Configuration
public class SpringConfig {
    private final MemberRepository memberRepository;

    public SpringConfig(MemberRepository memberRepository) {
        this.memberRepository = memberRepository;
    }

    @Bean
    public MemberService memberService() {
        return new MemberService(memberRepository);
    }
}
```

@Bean 어노테이션이 포함된 메소드 IOC 컨테이너에 등록한다.

## AOP(Aspect Orientied Programming) : 관점 지향 프로그래밍

OOP(Object Oriented Programming) 객체 지향 프로그래밍은 주요 관심사에 따라 클래스를 나누는데 로깅, 보안, 트랙잭션, 시간측정 등 부가적인 기능이 여러 군데에 존재한다는 점이 아쉽다.
AOP는 서비스 전역에 흩어진 부분적인 관심사를 비즈니스 로직으로 부터 분리(모듈화)하여 보다 깨끗한 코드를 작성하는 것을 목적으로 한다.

### AOP 용어

1. aspect
- 동일한 concern으로 모듈화하는 기능이다.
- advice + pointcut

2. advice
- aspect가 무엇을 언제할지 정의한다.
- Before : 메소드 실행 전
- After : AfterReturning + AfterThrowing
- AfterReturning : 정상 반환 이후
- AfterThrowing : 예외 발생 이후
- Around : before + after

3. pointcut
- advice를 정의할 jointpoint를 선별하는 기능이다.
- 실제 advice가 적용되는 시점

4. target
- 부가기능을 적용할 대상

5. jointpoint
- advice가 적용될 위치를 말한다. (spring에서는 메소드조인포인트만 제공)
- 메서드, 필드, 객체, 생성자 등

## PSA(Portable Service Abstraction): 서비스 추상화

PSA는 일관성 있는 서비스 추상화를 의미하는데 서비스 추상화의 예로 JDBC가 있다. JDBC라는 표준 스펙이 있기 때문에 어떤 DB를 사용하든 공통된 방식으로 코드를 작성할 수 있다.
스프링 프레임워크 또한 서비스 추상화를 위해 다양한 어댑터를 제공하는데 예를들어 OXM(객체와 xml매핑) 기술만 하더라도 Castor, JAXB, XMLBeans등 다양한 기술이 있는데 스프링 프레임워크는 실제로 어떠한 OXM기술을 쓰든 일관된 방식으로 코드를 작성할 수 있게 해준다.

